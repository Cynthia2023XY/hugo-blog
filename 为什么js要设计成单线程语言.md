---
sr-due: 2025-01-21
sr-interval: 195
sr-ease: 292
tags:
  - review_knowledge_code_js
  - review_knowledge_八股
---

#review/knowledge/code/js #review/knowledge/八股 

JavaScript 被设计成单线程主要是出于简化事件驱动编程和避免并发问题的考虑，特别是在它最初被创建出来时，用途主要是处理浏览器中的用户界面（UI）交互。
### 1. 避免并发问题：防止多个线程同时修改DOM树

在多线程环境中，共享资源的访问和修改需要仔细控制，以避免并发问题，如数据竞争和死锁。对于在浏览器环境中运行的脚本，这些问题会极大增加编程的复杂度。考虑到JavaScript主要用于动态修改HTML和处理事件，单线程模型简化了对DOM的操作，开发者不需要担心多个线程同时修改DOM树可能导致的问题。
![[多线程操作的解决方案-同步机制+锁机制#^occ2ga|多线程操作的解决方案-同步机制+锁机制]]
### 2. 简化事件驱动模型

JavaScript 的使用场景主要是响应用户操作（如点击、滚动等事件），以及执行网络请求等异步任务。单线程与事件循环模型结合，为处理事件和回调提供了一个简单有效的方式。开发者可以编写代码来响应事件，而无需担心多线程中的同步和锁问题。
[[多线程操作的解决方案-同步机制+锁机制|多线程操作的解决方案-同步机制+锁机制]]
### 3. 保持UI的一致性

在浏览器环境中，JavaScript 与UI渲染共享同一个线程。
如果JavaScript运行在多个线程中，那么在没有适当同步的情况下同时修改UI可能会导致不一致的状态或者UI闪烁等问题。单线程模型确保了UI的一致性和顺畅的用户体验。

### 4. 初始设计目标

当JavaScript被创造出来时，它的目的是为了在浏览器中添加动态行为和验证表单等相对简单的任务，并没有考虑到后来Web应用程序的复杂度和性能要求。
```ad-seealso
浏览器是多线程的(例如图中chrome浏览器架构)，当 JS 需要执行异步任务时，浏览器会另外启动一个线程去执行该任务。
![[Pasted image 20240327183101.png|400]]
也就是说，JavaScript是单线程的指的是执行JavaScript代码的线程只有一个，是浏览器提供的JavaScript引擎线程（主线程）。
除此之外，浏览器中还有定时器线程、 HTTP 请求线程等线程，这些线程主要不是来执行 JS 代码的。
```
随着时间的发展，虽然Web应用变得越来越复杂，但JavaScript的单线程模型已经被广泛接受，并且围绕这个模型开发出了丰富的异步编程模式。

### 解决方案

虽然JavaScript是单线程执行，但现代JavaScript引擎和HTML5提供了Web Workers等技术，允许在后台线程中运行代码，从而在不影响主线程（例如UI线程）的情况下执行计算密集型或长时间运行的任务。
[[什么是WebWorkers|什么是WebWorkers]]

